@model IEnumerable<ProyectoDSWToolify.Models.ViewModels.ListadoVentaFechaAndTipoVentaDTO>

@{
    ViewData["Title"] = "Reporte1";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/izitoast/dist/css/iziToast.min.css">
<script src="https://cdn.jsdelivr.net/npm/izitoast/dist/js/iziToast.min.js"></script>
<h1>Reporte1</h1>

@{
    if (TempData["ExitoListado"] != null)
    {
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                iziToast.success({
                    title: 'Éxito',
                    message: '@TempData["ExitoListado"]',
                    position: 'topRight',
                    transitionIn: 'fadeInUp',
                    transitionOut: 'fadeOut',
                });
            });
        </script>
    }
    if (TempData["ErrorListado"] != null)
    {
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                iziToast.warning({
                    title: 'Error',
                    message: '@TempData["ErrorListado"]',
                    position: 'topRight',
                    transitionIn: 'fadeInUp',
                    transitionOut: 'fadeOut',
                });
            });
        </script>
    }
}
<form asp-action="Reporte1" method="get">
    <div class="row g-3 align-items-end">
        <div class="col-md-3">
        <label for="fechaInicio">Fecha Inicio</label>
        <input type="date"
               id="fechaInicio"
               name="fechaInicio"
               value="" />
    </div>

        <div class="col-md-3">
        <label for="fechaFin">Fecha Fin</label>
        <input type="date"
               id="fechaFin"
               name="fechaFin"
               value="" />
    </div>

        <div class="col-md-3">
        <label for="tipo">Tipo De Venta</label>
        <select name="tipo" id="" class="form-control">
            <option value="">--SELECCIONE--</option>
            <option value="P">Presencial </option>
            <option value="R">Remota</option>
        </select>
    </div>
        <div class="col-md-3 d-flex flex-column flex-md-row gap-2">
            <button type="submit" class="btn btn-primary w-100 w-md-auto">
                <i class="fa-solid fa-magnifying-glass me-1"></i> Buscar
            </button>

            <a asp-action="Reporte1"
               asp-route-fechaInicio="@Context.Request.Query["fechaInicio"]"
               asp-route-fechaFin="@Context.Request.Query["fechaFin"]"
               asp-route-tipo="@Context.Request.Query["tipo"]"
               asp-route-export="excel"
               class="btn btn-success w-100 w-md-auto">
                <i class="fa-solid fa-file-excel me-1"></i> Excel
            </a>

            <a asp-action="Reporte1"
               asp-route-fechaInicio="@Context.Request.Query["fechaInicio"]"
               asp-route-fechaFin="@Context.Request.Query["fechaFin"]"
               asp-route-tipo="@Context.Request.Query["tipo"]"
               asp-route-export="pdf"
               class="btn btn-danger w-100 w-md-auto">
                <i class="fa-regular fa-file-pdf me-1"></i> PDF
            </a>
        </div>
    </div>
</form>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.idVenta)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.nombresCompletos)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.direccion)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.fechaGenerada)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.total)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.estado)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.tipoVenta)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.idVenta)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.nombresCompletos)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.direccion)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.fechaGenerada)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.total)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.estado)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.tipoVenta)
            </td>
            
        </tr>
}
    </tbody>
</table>
<div class="text-center mt-3">
    @for (int pag = 1; pag <= ViewBag.numeroPag; pag++)

    {
        bool pagActual = (ViewBag.pagActual == pag);
        <a asp-action="Reporte1"
           asp-controller="Admin"
           asp-route-pag="@pag"
           class="btn @(pagActual ? "btn-danger" : "btn-outline-secondary")"
           style="@(pagActual ? "pointer-events: none; background-color: darkred" : null)">
            @pag
        </a>
    }
</div>