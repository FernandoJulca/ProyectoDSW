@{
    ViewData["Title"] = "Ventas";
    Layout = "~/Views/Shared/_LayoutVendedor.cshtml";
}

<div class="App">
    <div class="min-vh-100 bg-light p-4">
        <div class="container-xl mx-auto">
            <!-- Encabezado -->
            <div id="alert-placeholder">
            </div>

            <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-lg-between gap-4">
                <div>
                    <h1 class="fs-3 fw-bold text-dark d-flex align-items-center gap-2">
                        <i class="bi bi-cart3"></i>
                        Gestión de Ventas
                    </h1>
                    <p class="text-secondary mt-1">Selecciona productos y gestiona tu venta</p>
                </div>
            </div>

            <!-- Productos Seleccionados -->
            <div class="card shadow my-4">
                <div class="card-body d-flex justify-content-between align-items-center fw-semibold">
                    <span>Productos Seleccionados</span>
                    <div class="badge bg-secondary text-white px-3 py-1 small rounded-pill"
                         id="countSeleccionados">
                        0 productos
                    </div>
                </div>
                <div class="card-body pt-0" id="contenedorSeleccionados">
                    <!-- Aquí JS inyecta la tabla seleccionados -->
                </div>
            </div>

            <!-- Botón abrir modal -->
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2 class="fs-4 fw-semibold text-dark">Catálogo de Productos</h2>
                <button type="button" class="btn btn-primary shadow-sm"
                        data-bs-toggle="modal" data-bs-target="#modalProductos">
                    <i class="bi bi-plus"></i> Agregar Producto
                </button>
            </div>

            <!-- Carrito de Venta -->
            <div class="card shadow">
                <div class="card-body d-flex justify-content-between align-items-center fw-semibold">
                    <span>Carrito de Venta</span>
                    <div class="badge bg-secondary text-white px-3 py-1 small rounded-pill"
                         id="countCarrito">
                        0 productos
                    </div>
                </div>
                <div class="card-body pt-0" id="contenedorCarrito">
                    <!-- Aquí JS inyecta el carrito -->
                </div>
            </div>
        </div>
    </div>

    <!-- En tu vista .cshtml, en algún lugar dentro del <body> -->
    <input type="hidden" id="currentUserId" value="@ViewBag.IdUsuario" />

    <!-- Modal Productos -->
    <div class="modal fade" id="modalProductos" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalProductosLabel">Catálogo de Productos</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="d-flex flex-column flex-md-row gap-2 mb-3 ">
                    <!-- Barra de búsqueda -->
                    <input type="text" id="txtBusqueda" class="form-control" placeholder="Buscar producto...">
                </div>
                <div class="modal-body">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Categoría</th>
                                <th>Precio</th>
                                <th>Stock</th>
                                <th>Acción</th>
                            </tr>
                        </thead>
                        <tbody id="tablaProductos">
                            <!-- JS carga productos aquí -->
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/VentasVendedor.js"></script>
}
